function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),gianniAccordion=function(){function e(t){var n=this;_classCallCheck(this,e),this.setDefaultData(),this.setCustomData(t),[].forEach.call(document.querySelectorAll(this.elements),function(e,t){n.els.push({wrapper:e,trigger:e.querySelector(n.trigger),content:e.querySelector(n.content)}),n.els[t].content.style.height=0}),this.attachEvents()}return _createClass(e,[{key:"transitionendEventName",value:function(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e]}},{key:"expand",value:function(e){var t=function(n){var i=this;n.target==e.content&&(e.content.removeEventListener(this.transitionendevent,t),e.isOpen&&requestAnimationFrame(function(){e.content.style.transition="0",e.content.style.height="auto",requestAnimationFrame(function(){e.content.style.height=null,e.content.style.transition=null,i.fire("elementOpened",e)})}))}.bind(this);e.content.addEventListener(this.transitionendevent,t),e.isOpen=!0,e.content.style.height=e.content.scrollHeight+"px"}},{key:"collapse",value:function(e){var t=function(n){n.target==e.content&&(e.content.removeEventListener(this.transitionendevent,t),e.isOpen||this.fire("elementClosed",e))}.bind(this);e.content.addEventListener(this.transitionendevent,t),e.isOpen=!1,requestAnimationFrame(function(){e.content.style.transition="0",e.content.style.height=e.content.scrollHeight+"px",requestAnimationFrame(function(){e.content.style.transition=null,e.content.style.height=0})})}},{key:"open",value:function(e){e.selected=!0,this.fire("elementSelected",e),this.expand(e),e.wrapper.classList.add(this.selectedClass)}},{key:"close",value:function(e){e.selected=!1,this.fire("elementUnselected",e),this.collapse(e),e.wrapper.classList.remove(this.selectedClass)}},{key:"toggle",value:function(e){var t=this;e.selected?this.close(e):(this.open(e),this.oneAtATime&&this.els.filter(function(t){return t!=e&&t.selected}).forEach(function(e){t.close(e)}))}},{key:"attachEvents",value:function(){var e=this;this.els.forEach(function(t,n){t.trigger.addEventListener("click",e.toggle.bind(e,t))})}},{key:"setDefaultData",value:function(){this.els=[],this.events={elementSelected:[],elementOpened:[],elementUnselected:[],elementClosed:[]},this.transitionendevent=this.transitionendEventName(),this.oneAtATime=!0,this.selectedClass="selected",this.trigger="[data-accordion-element-trigger]",this.content="[data-accordion-element-content]"}},{key:"setCustomData",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)this[t[n]]=e[t[n]]}},{key:"fire",value:function(e,t){for(var n=this.events[e],i=0;i<n.length;i++)n[i](t)}},{key:"on",value:function(e,t){this.events[e]&&this.events[e].push(t)}}]),e}(),myAccordion=new gianniAccordion({elements:".card article"});myAccordion.on("elementSelected",function(e){console.log("elementOpened",e)}),window.CanvasSlideshow=function(e){function t(){o.rotation+=.001,y=requestAnimationFrame(t)}var n=this;(e=e||{}).stageWidth=e.hasOwnProperty("stageWidth")?e.stageWidth:1920,e.stageHeight=e.hasOwnProperty("stageHeight")?e.stageHeight:1080,e.pixiSprites=e.hasOwnProperty("sprites")?e.sprites:[],e.centerSprites=!!e.hasOwnProperty("centerSprites")&&e.centerSprites,e.texts=e.hasOwnProperty("texts")?e.texts:[],e.autoPlay=!e.hasOwnProperty("autoPlay")||e.autoPlay,e.autoPlaySpeed=e.hasOwnProperty("autoPlaySpeed")?e.autoPlaySpeed:[10,3],e.fullScreen=!e.hasOwnProperty("fullScreen")||e.fullScreen,e.displaceScale=e.hasOwnProperty("displaceScale")?e.displaceScale:[200,70],e.displacementImage=e.hasOwnProperty("displacementImage")?e.displacementImage:"",e.navElement=e.hasOwnProperty("navElement")?e.navElement:document.querySelectorAll(".scene-nav"),e.displaceAutoFit=!!e.hasOwnProperty("displaceAutoFit")&&e.displaceAutoFit,e.wacky=!!e.hasOwnProperty("wacky")&&e.wacky,e.interactive=!!e.hasOwnProperty("interactive")&&e.interactive,e.interactionEvent=e.hasOwnProperty("interactionEvent")?e.interactionEvent:"",e.displaceScaleTo=!1===e.autoPlay?[0,0]:[20,20],e.textColor=e.hasOwnProperty("textColor")?e.textColor:"#fff",e.displacementCenter=!!e.hasOwnProperty("displacementCenter")&&e.displacementCenter,e.dispatchPointerOver=!!e.hasOwnProperty("dispatchPointerOver")&&e.dispatchPointerOver;var i=new PIXI.autoDetectRenderer(e.stageWidth,e.stageHeight,{transparent:!0}),a=new PIXI.Container,r=new PIXI.Container,o=new PIXI.Sprite.fromImage(e.displacementImage),s=new PIXI.filters.DisplacementFilter(o),l=new PIXI.TextStyle({fill:e.textColor,wordWrap:!0,wordWrapWidth:400,letterSpacing:20,fontSize:14});if(this.currentIndex=0,this.initPixi=function(){document.body.appendChild(i.view),a.addChild(r),a.interactive=!0,console.log(i.view.style),!0===e.fullScreen?(i.view.style.objectFit="cover",i.view.style.width="100%",i.view.style.height="100%",i.view.style.top="50%",i.view.style.left="50%",i.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)",i.view.style.transform="translate( -50%, -50% ) scale(1.2)"):(i.view.style.maxWidth="100%",i.view.style.top="50%",i.view.style.left="50%",i.view.style.webkitTransform="translate( -50%, -50% )",i.view.style.transform="translate( -50%, -50% )"),o.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT,a.filters=[s],!1===e.autoPlay&&(s.scale.x=0,s.scale.y=0),!0===e.wacky&&(o.anchor.set(.5),o.x=i.width/2,o.y=i.height/2),o.scale.x=2,o.scale.y=2,s.autoFit=e.displaceAutoFit,a.addChild(o)},this.loadPixiSprites=function(t){for(var n=e.sprites,a=e.texts,o=0;o<n.length;o++){var s=new PIXI.Texture.fromImage(t[o]),c=new PIXI.Sprite(s);if(a){var d=new PIXI.Text(a[o],l);c.addChild(d),d.anchor.set(.5),d.x=c.width/2,d.y=c.height/2}!0===e.centerSprites&&(c.anchor.set(.5),c.x=i.width/2,c.y=i.height/2),0!==o&&TweenMax.set(c,{alpha:0}),r.addChild(c)}},!0===e.autoPlay){var c=new PIXI.ticker.Ticker;c.autoStart=e.autoPlay,c.add(function(t){o.x+=e.autoPlaySpeed[0]*t,o.y+=e.autoPlaySpeed[1],i.render(a)})}else{var d=new PIXI.ticker.Ticker;d.autoStart=!0,d.add(function(e){i.render(a)})}var h=!1,u=r.children;this.moveSlider=function(t){h=!0;var i=new TimelineMax({onComplete:function(){n.currentIndex=t,h=!1,!0===e.wacky&&o.scale.set(1)},onUpdate:function(){!0===e.wacky&&(o.rotation+=.02*i.progress(),o.scale.set(3*i.progress()))}});i.clear(),i.isActive()||i.to(s.scale,1,{x:e.displaceScale[0],y:e.displaceScale[1]}).to(u[n.currentIndex],.5,{alpha:0}).to(u[t],.5,{alpha:1}).to(s.scale,1,{x:e.displaceScaleTo[0],y:e.displaceScaleTo[1]})};for(var p=e.navElement,v=0;v<p.length;v++){p[v].onclick=function(e){return!h&&("next"===this.getAttribute("data-nav")?n.currentIndex>=0&&n.currentIndex<u.length-1?n.moveSlider(n.currentIndex+1):n.moveSlider(0):n.currentIndex>0&&n.currentIndex<u.length?n.moveSlider(n.currentIndex-1):n.moveSlider(spriteImages.length-1),!1)}}if(this.init=function(){n.initPixi(),n.loadPixiSprites(e.pixiSprites)},!0===e.interactive){var y,f,w;r.interactive=!0,r.buttonMode=!0,"hover"!==e.interactionEvent&&"both"!==e.interactionEvent||(r.pointerover=function(e){f=e.data.global.x,w=e.data.global.y,TweenMax.to(s.scale,1,{x:"+="+100*Math.sin(f),y:"+="+100*Math.cos(w)}),t()},r.pointerout=function(e){TweenMax.to(s.scale,1,{x:0,y:0}),cancelAnimationFrame(y)}),"click"!==e.interactionEvent&&"both"!==e.interactionEvent||(r.pointerup=function(t){!0===e.dispatchPointerOver?TweenMax.to(s.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(s.scale,1,{x:20,y:20})}}):(TweenMax.to(s.scale,1,{x:0,y:0}),cancelAnimationFrame(y))},r.pointerdown=function(e){f=e.data.global.x,w=e.data.global.y,TweenMax.to(s.scale,1,{x:"+="+1200*Math.sin(f),y:"+="+200*Math.cos(w)})},r.pointerout=function(t){!0===e.dispatchPointerOver?TweenMax.to(s.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(s.scale,1,{x:20,y:20})}}):(TweenMax.to(s.scale,1,{x:0,y:0}),cancelAnimationFrame(y))})}!0===e.displacementCenter&&(o.anchor.set(.5),o.x=i.view.width/2,o.y=i.view.height/2),this.init()};